import { Text, View } from "react-native";

import { Avatar } from "react-native-elements";
import { Card, Divider } from "../index";

import { styles } from "./styled";

const PentestCard = ({ pentest }) => {
  const TEXTS = {
    updates: "Updates",
    coverage: "Coverage",
    draft: "Draft",
    retest: "Re-test",
  };

  const { uri, name, duration, tags, draft, updates, coverage, retest } =
    pentest;

  const renderTagColors = (status, index) => {
    if (status == "Live") {
      return (
        <View key={index} style={styles.liveTag}>
          <Text>Live</Text>
        </View>
      );
    } else if (status == "Remediation") {
      return (
        <View key={index} style={styles.remediationTag}>
          <Text>Remediation</Text>
        </View>
      );
    } else if (status == "Planned") {
      return (
        <View key={index} style={styles.plannedTag}>
          <Text>Planned</Text>
        </View>
      );
    } else if (status == "Draft") {
      return (
        <View key={index} style={styles.draftTag}>
          <Text>Draft</Text>
        </View>
      );
    }
  };
  const renderTags = (tags) => {
    return tags.map((tag, index) => {
      return renderTagColors(tag, index);
    });
  };
  return (
    <Card>
      <View style={styles.pentestInfo}>
        <View style={styles.avatarStyle}>
          <Avatar
            width={100}
            height={100}
            activeOpacity={0.7}
            source={{
              uri: uri,
            }}
          />
        </View>

        <View style={styles.pentestColumn}>
          <Text style={styles.pentestName}>{name}</Text>
          <Text style={styles.secondaryTitle}>{duration}</Text>
          <View style={{ flexDirection: "row" }}>{renderTags(tags)}</View>
        </View>
      </View>
      <View style={styles.pentestStats}>
        <View style={styles.statsContainer}>
          <Text style={styles.secondaryTitle}>{updates}</Text>
          <Text style={styles.statsTitle}>{TEXTS.updates}</Text>
        </View>
        <Divider />
        <View style={styles.statVals}>
          <Text style={styles.secondaryTitle}>{coverage}</Text>
          <Text style={styles.statsTitle}>{TEXTS.coverage}</Text>
        </View>
        <Divider />
        <View style={styles.statVals}>
          <Text style={styles.secondaryTitle}>{draft}</Text>
          <Text style={styles.statsTitle}>{TEXTS.draft}</Text>
        </View>
        <Divider />
        <View style={styles.statVals}>
          <Text style={styles.secondaryTitle}>{retest}</Text>
          <Text style={styles.statsTitle}>{TEXTS.retest}</Text>
        </View>
      </View>
    </Card>
  );
};

export { PentestCard };
