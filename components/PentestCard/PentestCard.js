import { Text, View } from "react-native";

import { Avatar } from "react-native-elements";
import { Card, Divider } from "../../ui";

import { styles } from "./styled";

const PentestCard = ({ pentest }) => {
  const TEXTS = {
    updates: "Updates",
    coverage: "Coverage",
    draft: "Draft",
    retest: "Re-test",
  };

  const { uri, name, duration, state, role, draft, updates, coverage, retest } =
    pentest;

  const renderPentestState = () => {
    if (state == "Live") {
      return (
        <View style={styles.liveTag}>
          <Text>Live</Text>
        </View>
      );
    } else if (state == "Remediation") {
      return (
        <View style={styles.remediationTag}>
          <Text>Remediation</Text>
        </View>
      );
    } else if (state == "Closed") {
      return (
        <View style={styles.pentesterTag}>
          <Text>Closed</Text>
        </View>
      );
    } else if (state == "Draft") {
      return (
        <View style={styles.draftTag}>
          <Text>Draft</Text>
        </View>
      );
    }
  };

  const renderPentesterRole = () => {
    return (
      <View style={styles.pentesterTag}>
        <Text>{role === "Lead" ? "Lead" : "Pentester"}</Text>
      </View>
    );
  };

  const renderTags = () => {
    return (
      <>
        {renderPentestState()}
        {renderPentesterRole()}
      </>
    );
  };
  return (
    <Card>
      <View style={styles.pentestInfo}>
        <View style={styles.avatarStyle}>
          <Avatar
            width={100}
            height={100}
            activeOpacity={0.7}
            source={{
              uri: uri,
            }}
          />
        </View>

        <View style={styles.pentestColumn}>
          <Text style={styles.pentestName}>{name}</Text>
          <Text style={styles.secondaryTitle}>{duration}</Text>
          <View style={{ flexDirection: "row" }}>{renderTags()}</View>
        </View>
      </View>
      <View style={styles.pentestStats}>
        <View style={styles.statsContainer}>
          <Text style={styles.secondaryTitle}>{updates}</Text>
          <Text style={styles.statsTitle}>{TEXTS.updates}</Text>
        </View>
        <Divider />
        <View style={styles.statVals}>
          <Text style={styles.secondaryTitle}>{coverage}</Text>
          <Text style={styles.statsTitle}>{TEXTS.coverage}</Text>
        </View>
        <Divider />
        <View style={styles.statVals}>
          <Text style={styles.secondaryTitle}>{draft}</Text>
          <Text style={styles.statsTitle}>{TEXTS.draft}</Text>
        </View>
        <Divider />
        <View style={styles.statVals}>
          <Text style={styles.secondaryTitle}>{retest}</Text>
          <Text style={styles.statsTitle}>{TEXTS.retest}</Text>
        </View>
      </View>
    </Card>
  );
};

export { PentestCard };
